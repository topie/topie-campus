<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>教师导学辅助系统</title>

    <!-- Bootstrap Core CSS -->
    <link href="../vendors/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="../vendors/metisMenu/metisMenu.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="application/css/sb-admin-2.css" rel="stylesheet">
    <link href="application/css/index.css?v=2.0" rel="stylesheet">
    <link href="../vendors/jquery-ui/jquery-ui.min.css" rel="stylesheet" type="text/css">
    <!-- Custom Fonts -->
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <link href="../vendors/datatables/dataTables.bootstrap.css" rel="stylesheet" type="text/css">
    <link href="../vendors/zTree/css/zTreeStyle/zTreeStyle.css" rel="stylesheet" type="text/css">
    <link href="../vendors/bootstrap-modal/css/bootstrap-modal.css" rel="stylesheet" type="text/css">
    <link href="../vendors/bootstrap-modal/css/bootstrap-modal-bs3patch.css" rel="stylesheet" type="text/css">
    <link href="../vendors/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet" type="text/css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="../vendors/html5shiv/dist/html5shiv.js"></script>
    <script src="../vendors/respond/dest/respond.min.js"></script>
    <![endif]-->

</head>

<body>

<div id="wrapper">
    <nav class="ldhd navbar navbar-default" role="navigation">
        <div class="ldhd-bg container-fluid">
            <div class="container">
                <a href="index.html" class="pdr32"><img src="application/img/hd_logo1.png"></a>
                <a href="index.html"><img class="sm-pdt10" src="application/img/hd_logo2.png"></a>
                <a href="index.html"><img class="sm-pdt10" src="application/img/hd_logo3.png"></a>
            </div>
        </div><!-- /.container-fluid -->
    </nav>
    <!-- Second Nav -->
    <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#collapse-menu">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse animated fadeIn" id="collapse-menu">
                <ul class="nav navbar-nav animated fadeIn" id="vertical-menu">
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"> 账户 <span class="caret"></span></a>
                        <ul class="dropdown-menu animated flipInX" role="menu">
                            <li><a id="updatePassword" href="javascript:void(0);">修改密码</a></li>
                            <li><a id="logout" href="javascript:void(0);">退出登录</a></li>
                        </ul>
                    </li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>

    <div id="page-wrapper" style="margin-left: 0">
        <div class="row">
            <div class="col-lg-12">
                <h3 class="page-header" id="main-title"></h3>
            </div>
            <!-- /.col-lg-12 -->
        </div>

        <!-- .row -->
        <div class="row">
            <div class="col-md-12">
                <!-- /.panel -->
                <div class="panel panel-default" style="border-radius:0">
                    <!-- /.panel-heading -->
                    <div id="main-body" class="panel-body">

                    </div>
                    <!-- /.panel-body -->
                </div>
                <!-- /.panel -->
            </div>
        </div>
        <!-- /.row -->
    </div>
    <!-- /#page-wrapper -->

</div>
<!-- /#wrapper -->

<footer>
    <div class="container">

        <div class="copy text-center">
            版权所有 <a href='#'>北京联合大学</a>
        </div>

    </div>
</footer>
<!-- jQuery -->
<script src="../vendors/jquery/dist/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="../vendors/bootstrap/js/bootstrap.min.js"></script>
<script src="../vendors/jquery.cookie/jquery.cookie.js"></script>
<script src="../vendors/jquery-ui/jquery-ui.min.js"></script>
<script src="../vendors/moment.js"></script>
<script src="../vendors/bootbox.js"></script>

<!-- Metis Menu Plugin JavaScript -->
<script src="../vendors/metisMenu/metisMenu.js"></script>

<!-- Custom Theme JavaScript -->
<script src="application/js/sb-admin-2.js"></script>

<script src="../vendors/datatables/js/jquery.dataTables.min.js"></script>

<script src="../vendors/bootstrap-modal/js/bootstrap-modal.js"></script>
<script src="../vendors/bootstrap-modal/js/bootstrap-modalmanager.js"></script>
<script src="../vendors/bootstrap-fileinput/bootstrap-fileinput.js"></script>
<script src="../vendors/bootstrap-daterangepicker/daterangepicker.js"></script>
<script src="../global/js/common.js"></script>
<script src="../vendors/zTree/js/jquery.ztree.core-3.5.min.js"></script>
<script src="../vendors/zTree/js/jquery.ztree.excheck-3.5.min.js"></script>
<script src="../vendors/zTree/js/jquery.ztree.exedit-3.5.min.js"></script>
<script src="../vendors/jquery.tmpl.min.js"></script>
<script src="../vendors/jquery.validate.min.js"></script>
<script src="../vendors/artTemplate/template.js"></script>
<script src="../vendors/flot/excanvas.min.js"></script>
<script src="../vendors/flot/jquery.flot.js"></script>
<script src="../vendors/flot/jquery.flot.pie.js"></script>
<script src="../vendors/flot/jquery.flot.resize.js"></script>
<script src="../vendors/flot/jquery.flot.time.js"></script>
<script src="../vendors/flot-tooltip/jquery.flot.tooltip.min.js"></script>
<script src="../global/js/topie-modal.js"></script>
<script src="../global/js/topie-form.js?v=1.0"></script>
<script src="../global/js/topie-grid.js?v=3.0"></script>
<script src="../global/js/echarts.js"></script>
<script src="application/js/app.js"></script>
<script src="application/js/menu.js"></script>
<script src="application/js/index.js"></script>
<script src="application/js/message/receive.js"></script>
<script src="application/js/message/send.js"></script>
<script src="application/js/message/atMe.js?v=3.0"></script>
<script src="application/js/student/student.js"></script>
<script src="application/js/teacher/teacher.js"></script>
<script src="application/js/teacher/survey.js"></script>
<script src="application/js/teacher/msg.js"></script>
<script src="application/js/student/stuScore.js"></script>
<script src="application/js/student/stucet.js"></script>
<script src="application/js/student/stuSeleCourse.js"></script>
<script src="application/js/student/stuTimeTable.js"></script>
<script src="application/js/student/survey.js"></script>
<script src="application/js/student/stuExam.js"></script>
<script src="application/js/teacher/planSummary.js"></script>
<script src="application/js/teacher/record.js"></script>
<script src="../admin/application/js/job/static_employment.js"></script>
<script src="../admin/application/js/leader/teacher.js"></script>
<script src="../admin/application/js/leader/student.js"></script>
<script type="text/javascript">
    bootbox.setLocale("zh_CN");
    $("#logout").on("click", function () {
        $.ajax(
            {
                type: 'GET',
                url: App.href + "/api/logout",
                contentType: "application/json",
                beforeSend: function (request) {
                    request.setRequestHeader("X-Auth-Token", App.token);
                },
                dataType: "json",
                success: function (result) {
                    if (result.code == 200) {
                        $.cookie('tc_t', null);
                        window.location.href = App.href + "/static/front/login.html";
                    } else {
                        alert(result.message);
                    }
                }
            }
        );
    });
    $("#updatePassword").click(function () {
        var modal = $.topieModal({
            id: "userForm",
            title: "修改密码",
            destroy: true
        });
        var formOpts = {
            id: "update_password_form",
            name: "update_password_form",
            method: "POST",
            action: App.href + "/api/sys/user/updatePassword?topie_token=" + App.token,//表单action
            ajaxSubmit: true,//是否使用ajax提交表单
            rowEleNum: 1,
            beforeSubmit: function () {
            },
            beforeSend: function (request) {
            },
            ajaxSuccess: function () {
                modal.hide();
            },
            submitText: "修改",//保存按钮的文本
            showReset: true,//是否显示重置按钮
            isValidate: true,//开启验证
            buttons: [{
                type: 'button',
                text: '关闭',
                handle: function () {
                    modal.hide();
                }
            }],
            buttonsAlign: "center",
            items: [{
                type: 'password',//类型
                name: 'oldPassword',//name
                id: 'oldPassword',//id
                label: '原密码',//左边label
                cls: 'input-large',
                rule: {
                    required: true
                },
                message: {//对应验证提示信息
                    required: "请输入原密码"
                }
            }, {
                type: 'password',//类型
                name: 'newPassword',//name
                id: 'newPassword',//id
                label: '新密码',//左边label
                cls: 'input-medium',
                rule: {
                    required: true,
                    minlength: 6,
                    maxlength: 64
                },
                message: {
                    required: "请输入密码",
                    minlength: "至少{0}位",
                    maxlength: "做多{0}位"
                }
            }, {
                type: 'password',//类型
                name: 'newPassword1',//name
                id: 'newPassword1',//id
                label: '确认密码',//左边label
                cls: 'input-medium',
                rule: {
                    required: true,
                    equalTo: "#newPassword"
                },
                message: {
                    required: "请输入确认密码",
                    equalTo: "与密码不一致"
                }
            }]
        };
        var form = modal.$body.topieForm(formOpts);
        modal.show();
    })
</script>
</body>
</html>
