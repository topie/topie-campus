<!DOCTYPE html>
<html>
<head>
    <title>Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- jQuery UI -->
    <link href="../vendors/jquery-ui/jquery-ui.min.css" rel="stylesheet" type="text/css">
    <!-- Bootstrap -->
    <link href="../vendors/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- styles -->
    <link href="application/css/styles.css?v=2.0" rel="stylesheet">
    <!-- Custom Fonts -->
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <link href="../vendors/datatables/dataTables.bootstrap.css" rel="stylesheet" type="text/css">
    <link href="../vendors/bootstrap-modal/css/bootstrap-modal.css" rel="stylesheet" type="text/css">
    <link href="../vendors/bootstrap-modal/css/bootstrap-modal-bs3patch.css" rel="stylesheet" type="text/css">
    <link href="../vendors/bootstrap-fileinput/bootstrap-fileinput.css" rel="stylesheet" type="text/css">
    <link href="../vendors/jquery-file-upload/css/jquery.fileupload.css" rel="stylesheet" type="text/css">
    <link href="../vendors/jquery-file-upload/css/jquery.fileupload-ui.css" rel="stylesheet" type="text/css">
    <link href="../vendors/zTree/css/zTreeStyle/zTreeStyle.css" rel="stylesheet" type="text/css">
    <link href="../vendors/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet" type="text/css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="../vendors/html5shiv/dist/html5shiv.js"></script>
    <script src="../vendors/respond/dest/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<div class="header">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <!-- Logo -->
                <div class="logo">
                    <h1><a href="index.html">教师导学辅助系统后台管理</a></h1>
                </div>
            </div>
            <div class="col-md-6">
                <div class="navbar navbar-inverse">
                    <ul class="nav navbar-nav pull-right">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                我的账号 <b class="caret"></b></a>
                            <ul class="dropdown-menu animated fadeInUp">
                                <li><a id="updatePassword" href="javascript:void(0);">修改密码</a></li>
                                <li><a id="logout" href="javascript:void(0);">退出登录</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="page-content">
    <div class="row">
        <div class="col-md-3">
            <div class="sidebar content-box" style="display: block;">
                <ul class="nav" id="side-menu">

                </ul>
            </div>
        </div>
        <div class="col-md-9">
            <div class="row">
                <div class="col-md-12">
                    <div class="content-box-header">
                        <div id="main-title" class="panel-title">
                            TITLE
                        </div>
                    </div>
                    <div class="content-box-large box-with-header">
                        <div id="main-body" class="panel-body">
                            <div class="progress" style="width:40%;">
                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0"
                                     aria-valuemax="60">
                                </div>
                            </div>
                            <div class="progress" style="width:80%;">
                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0"
                                     aria-valuemax="60">
                                </div>
                            </div>
                            <div class="progress" style="width:80%;">
                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0"
                                     aria-valuemax="60">
                                </div>
                            </div>
                            <div class="progress" style="width:80%;">
                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0"
                                     aria-valuemax="60">
                                </div>
                            </div>
                            <div class="progress" style="width:80%;">
                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0"
                                     aria-valuemax="60">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<footer>
    <div class="container">

        <div class="copy text-center">
            Copyright 2016 <a href='#'>TOPIE</a>
        </div>

    </div>
</footer>

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="../vendors/jquery/dist/jquery.js"></script>
<script src="../vendors/jquery-ui/jquery-ui.min.js"></script>
<script src="../vendors/moment.js"></script>
<script src="../vendors/ajaxfileupload.js"></script>
<script src="../vendors/jquery.cookie/jquery.cookie.js"></script>
<script src="../vendors/jquery.validate.min.js"></script>
<script src="../vendors/additional-methods.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../vendors/bootstrap/js/bootstrap.min.js"></script>
<script src="../vendors/bootbox.min.js"></script>
<script src="../vendors/block-ui/jquery.blockUI.js"></script>
<script src="../vendors/datatables/js/jquery.dataTables.min.js"></script>
<script src="../vendors/bootstrap-modal/js/bootstrap-modal.js"></script>
<script src="../vendors/bootstrap-modal/js/bootstrap-modalmanager.js"></script>
<script src="../vendors/bootstrap-fileinput/bootstrap-fileinput.js"></script>
<script src="../vendors/jquery-file-upload/js/jquery.fileupload.js"></script>
<script src="../vendors/jquery-file-upload/js/jquery.fileupload-jquery-ui.js"></script>
<script src="../vendors/zTree/js/jquery.ztree.core-3.5.min.js"></script>
<script src="../vendors/zTree/js/jquery.ztree.excheck-3.5.min.js"></script>
<script src="../vendors/zTree/js/jquery.ztree.exedit-3.5.min.js"></script>
<script src="../vendors/kindeditor/kindeditor.js"></script>
<script src="../vendors/artTemplate/template.js"></script>
<script charset="utf-8" src="../vendors/kindeditor/lang/zh_CN.js"></script>
<script src="../vendors/bootstrap-daterangepicker/daterangepicker.js"></script>
<script src="../global/js/common.js"></script>
<script src="../vendors/jquery.tmpl.min.js"></script>
<script src="../global/js/topie-modal.js"></script>
<script src="../global/js/topie-grid.js?v=3.0"></script>
<script src="../global/js/topie-form.js?v=2.0"></script>
<script src="../global/js/echarts.js"></script>
<script src="application/js/app.js"></script>
<script src="application/js/index.js"></script>
<script src="application/js/info/upload.js"></script>
<script src="application/js/info/teacher.js"></script>
<script src="application/js/info/teacher-type.js"></script>
<script src="application/js/info/student.js"></script>
<script src="../front/application/js/student/student.js"></script>
<script src="../front/application/js/student/stuTimeTable.js"></script>
<script src="application/js/info/notice.js"></script>
<script src="application/js/sys/user.js"></script>
<script src="application/js/sys/role.js"></script>
<script src="application/js/sys/function.js"></script>
<script src="application/js/job/employment.js"></script>
<script src="application/js/job/static_employment.js"></script>
<script src="application/js/info/survey-group.js"></script>
<script src="application/js/info/survey-question.js"></script>
<script src="application/js/info/msg.js"></script>
<script src="application/js/static/msgStatic.js"></script>
<script src="application/js/static/teacherStatic.js"></script>
<script src="application/js/leader/student.js"></script>
<script src="application/js/info/login-info.js"></script>
<script src="application/js/info/message-info.js"></script>
<script type="text/javascript">
    bootbox.setLocale("zh_CN");
    $("#logout").on("click", function () {
        $.ajax(
                {
                    type: 'GET',
                    url: App.href + "/api/logout",
                    contentType: "application/json",
                    beforeSend: function (request) {
                        request.setRequestHeader("X-Auth-Token", App.token);
                    },
                    dataType: "json",
                    success: function (result) {
                        if (result.code == 200) {
                            $.cookie('tc_t', null);
                            window.location.href = App.href + "/static/admin/login.html";
                        } else {
                            alert(result.message);
                        }
                    }
                }
        );
    });

    $("#updatePassword").click(function () {
        var modal = $.topieModal({
            id: "userForm",
            title: "修改密码",
            destroy: true
        });
        var formOpts = {
            id: "update_password_form",
            name: "update_password_form",
            method: "POST",
            action: App.href + "/api/sys/user/updatePassword?topie_token=" + App.token,//表单action
            ajaxSubmit: true,//是否使用ajax提交表单
            rowEleNum: 1,
            beforeSubmit: function () {
            },
            beforeSend: function (request) {
            },
            ajaxSuccess: function () {
                modal.hide();
            },
            submitText: "修改",//保存按钮的文本
            showReset: true,//是否显示重置按钮
            isValidate: true,//开启验证
            buttons: [{
                type: 'button',
                text: '关闭',
                handle: function () {
                    modal.hide();
                }
            }],
            buttonsAlign: "center",
            items: [{
                type: 'password',//类型
                name: 'oldPassword',//name
                id: 'oldPassword',//id
                label: '原密码',//左边label
                cls: 'input-large',
                rule: {
                    required: true
                },
                message: {//对应验证提示信息
                    required: "请输入原密码"
                }
            }, {
                type: 'password',//类型
                name: 'newPassword',//name
                id: 'newPassword',//id
                label: '新密码',//左边label
                cls: 'input-medium',
                rule: {
                    required: true,
                    minlength: 6,
                    maxlength: 64
                },
                message: {
                    required: "请输入密码",
                    minlength: "至少{0}位",
                    maxlength: "做多{0}位"
                }
            }, {
                type: 'password',//类型
                name: 'newPassword1',//name
                id: 'newPassword1',//id
                label: '确认密码',//左边label
                cls: 'input-medium',
                rule: {
                    required: true,
                    equalTo: "#newPassword"
                },
                message: {
                    required: "请输入确认密码",
                    equalTo: "与密码不一致"
                }
            }]
        };
        var form = modal.$body.topieForm(formOpts);
        modal.show();
    })
</script>
</body>
</html>
